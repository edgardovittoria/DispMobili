<ion-header>
  <ion-navbar>

    <ion-title>{{'NEW_WHISTLE' | translate }}</ion-title>
  </ion-navbar>
</ion-header>

<ion-content>

    <div padding>

    <ion-segment [(ngModel)]="postType">
        <ion-segment-button value="Fun">
          Fun
        </ion-segment-button>
        <ion-segment-button value="Call">
          Call
        </ion-segment-button>
      </ion-segment>    
  
    <form #whistleForm="ngForm">

          <div [ngSwitch]="postType">
      
        <div class="form" *ngSwitchCase="'Fun'">  
            <ion-input hidden type="text" readonly="true" [(ngModel)]="postType" name="postType" value="Fun"></ion-input>

        <ion-card *ngIf="user">
            <ion-item>
              <ion-avatar item-start>
                <img src="../../assets/imgs/Paolo.jpg">
              </ion-avatar>
              <h2>{{ user.name }} {{ user.surname }}</h2>
            </ion-item>
            <ion-card-content>
                <ion-item>
                    <ion-input [(ngModel)]="whistle.body" name="body" type="text" #body="ngModel" required placeholder="Write here.."></ion-input>
                  </ion-item>             
            </ion-card-content>     
      </ion-card>
        </div>
      

      <div class="form" *ngSwitchCase="'Call'">
          <ion-input hidden readonly="true" [(ngModel)]="postType" name="postType" type="text" value="Call"></ion-input>
          <ion-card>
              <ion-item>
                <ion-avatar item-start>
                  <img src="../../assets/imgs/Paolo.jpg">
                </ion-avatar>
                <h2>{{ user.name }} {{ user.surname }}</h2>
              </ion-item>
              <ion-card-content>
                  <ion-item>
                      <ion-input [(ngModel)]="call.body" name="body" type="text" #body="ngModel" placeholder="Write here.." required></ion-input>
                    </ion-item>             
              </ion-card-content>
              <ion-item>
                  <ion-label color="primary">{{'CALL_TYPE' | translate }}</ion-label>
                  <ion-select [(ngModel)]="call.callsType" name="call.callsType">
                    <ion-option value="Passage">{{'PASSAGE' | translate }}</ion-option>
                    <ion-option value="Break">{{'BREAK' | translate }}</ion-option>
                    <ion-option value="Information">{{'INFORMATION' | translate }}</ion-option>
                    <ion-option value="Medical">{{'MEDICAL' | translate }}</ion-option>
                  </ion-select>
              </ion-item>      
        </ion-card> 
      </div>
    </div>
    <button ion-button round color="primary" type="submit" [disabled]="!whistleForm.form.valid" class="submit" (click)="submit()">{{'SEND_BUTTON' | translate }}</button>
  </form>
    </div>


</ion-content>